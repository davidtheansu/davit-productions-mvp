import type { NextApiRequest, NextApiResponse } from 'next'; import { getEvent, updateClock } from '@/lib/db'; export default function handler(req:NextApiRequest,res:NextApiResponse){ const { slug } = req.body||{}; const e=getEvent(String(slug||'')); if(!e) return res.status(404).json({error:'not found'}); const running=!e.clock.running; updateClock(e.slug,{ running }); res.json({ ok:true, running }); }
